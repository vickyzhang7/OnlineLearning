import{r as V,a as N,u as P,b as A,o as F,w as I,c as i,d as g,e as R,f as l,g as a,F as Z,h as n,i as c,j as t,t as q,k as D,l as G,E as _,m as H,n as J,p as K}from"./index-a2849ebe.js";const O=n("div",{class:"title",style:{"margin-bottom":"0vh !important"}},"欢迎注册",-1),Q=n("span",{style:{color:"black"}},"已有账号？",-1),W={class:"flex1"},X=n("div",{class:"title"},"欢迎登录VisionEdu",-1),Y={class:"flex",style:{"margin-bottom":"16vh !important","margin-top":"4vh"}},ee={class:"flex1"},le=n("div",{class:"title"},"找回密码",-1),ae={class:"flex1"},oe=n("div",{class:"bgfont"},[n("p",{style:{"font-size":"3.69vw","font-weight":"600",color:"black","margin-bottom":"2.4vh"}},"用科技"),n("p",{style:{"font-size":"2.4vw",color:"black"}},"助力中国教育事业")],-1),re={__name:"LoginPage",setup(se){const b=V(!1),k=V(!1),w=V(!0),y=V(),e=V({username:"",password:"",school:"",subject:"",email:"",verifyCode:"",registerCode:"",repassword:"",isChecked:!1,saveToken:!1}),u=N({disabled:!1,waitTime:60,count:0}),U={username:[{required:!0,message:"请设置用户名",trigger:"blur"},{min:5,max:10,message:"用户名必须是 5-10位 的字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是 6-15位 的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是 6-15位 的非空字符",trigger:"blur"},{validator:(p,o,v)=>{o!==e.value.password?v(new Error("两次输入密码不一致")):v()},trigger:"blur"}],school:[{required:!0,message:"请填写学校",trigger:"blur"}],subject:[{required:!0,message:"请选择学科",trigger:"blur"}],email:[{required:!0,message:"请填写邮箱号",trigger:"blur"},{pattern:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/,message:"邮件格式有误",trigger:"blur"}],verifyCode:[{required:!0,message:"请填写验证码",trigger:"blur"}],registerCode:[{required:!1,trigger:"blur"}],select:[]},B=async()=>{e.value.isChecked===!0?(await y.value.validate(),await G(e.value),_.success("注册成功"),b.value=!1,k.value=!1,w.value=!0):_.warning("请阅读并签署条款")},j=P(),S=A(),E=async()=>{if(e.value.isChecked===!0){await y.value.validate();const p=await H(e.value);j.setToken(p.data.data.data.tokenValue,e.value.saveToken),_.success("登录成功"),e.value.saveToken?(localStorage.setItem("userId",e.value.username),localStorage.setItem("password",e.value.password)):(localStorage.removeItem("userId"),localStorage.removeItem("password")),S.push("/firstPage")}else _.warning("请阅读并签署条款")},$=async()=>{if(e.value.isChecked===!0){await y.value.validate();const p=await J(e.value);console.log(p),_.success("修改密码成功，请重新登录"),k.value=!1,w.value=!0}else _.warning("请阅读并签署条款")},L=()=>{u.count=u.waitTime,u.disabled=!0;let p=setInterval(()=>{u.count>1&&u.count<=u.waitTime?u.count--:(u.disabled=!1,clearInterval(p))},1e3)},T=async()=>{console.log(e.value.email),e.value.email===""||e.value.email===void 0?_.error("电子邮件为空"):(L(),await K(e.value.email))};return F(()=>{localStorage.getItem("userId")&&(e.value.username=localStorage.getItem("userId"),e.value.password=localStorage.getItem("password"),e.value.saveToken=!0,S.push("/"),console.log("跳转")),console.log("用户id为0")}),I(w,()=>{e.value={username:"",password:"",isChecked:Boolean,saveToken:Boolean}}),I(b,()=>{e.value={username:"",password:"",school:"",subject:"",email:"",verifyCode:"",registerCode:"",isChecked:Boolean}}),I(k,()=>{e.value={email:"",verifyCode:"",password:"",repassword:"",isChecked:Boolean}}),(p,o)=>{const v=i("el-col"),f=i("el-link"),d=i("el-input"),r=i("el-form-item"),C=i("el-option"),M=i("el-select"),m=i("el-button"),z=i("el-row"),h=i("el-checkbox"),x=i("el-form");return g(),R(Z,null,[l(z,{class:"login-page"},{default:a(()=>[l(v,{span:5}),l(v,{span:20},{default:a(()=>[b.value?(g(),c(x,{key:0,model:e.value,rules:U,ref_key:"form",ref:y,size:"large",autocomplete:"off","label-position":"right","label-width":"95px"},{default:a(()=>[O,l(f,{type:"primary",underline:!1,onClick:o[0]||(o[0]=s=>{b.value=!1,w.value=!0}),class:"privacy",style:{"font-size":"0.9vw",height:"1vh"}},{default:a(()=>[Q,t("登录 ")]),_:1}),l(r,{prop:"username",label:"用户名"},{default:a(()=>[l(d,{modelValue:e.value.username,"onUpdate:modelValue":o[1]||(o[1]=s=>e.value.username=s),placeholder:"请设置用户名"},null,8,["modelValue"])]),_:1}),l(r,{prop:"password",label:"设置密码"},{default:a(()=>[l(d,{modelValue:e.value.password,"onUpdate:modelValue":o[2]||(o[2]=s=>e.value.password=s),type:"password",placeholder:"请设置6位数密码，包含字母与数字"},null,8,["modelValue"])]),_:1}),l(r,{prop:"school",label:"任教学校"},{default:a(()=>[l(d,{modelValue:e.value.school,"onUpdate:modelValue":o[3]||(o[3]=s=>e.value.school=s),placeholder:"请填写学校名称"},null,8,["modelValue"])]),_:1}),l(r,{prop:"subject",label:"任教学科"},{default:a(()=>[l(M,{modelValue:e.value.subject,"onUpdate:modelValue":o[4]||(o[4]=s=>e.value.subject=s),placeholder:"请选择",style:{"font-size":"1px!important",height:"5.53vh !important",width:"100%"}},{default:a(()=>[l(C,{label:"英语",value:"English"}),l(C,{label:"语文",value:"Chinese"}),l(C,{label:"数学",value:"Math"}),l(C,{label:"地理",value:"Geography"})]),_:1},8,["modelValue"])]),_:1}),l(r,{prop:"email",label:"邮箱号"},{default:a(()=>[l(d,{modelValue:e.value.email,"onUpdate:modelValue":o[5]||(o[5]=s=>e.value.email=s),placeholder:"请填写邮箱号"},{append:a(()=>[u.disabled?(g(),c(m,{key:1,type:"default",disabled:""},{default:a(()=>[t(q(u.count)+"秒后重新发送",1)]),_:1})):(g(),c(m,{key:0,type:"default",onClick:T},{default:a(()=>[t("发送验证码")]),_:1}))]),_:1},8,["modelValue"])]),_:1}),l(z,null,{default:a(()=>[l(v,{span:12},{default:a(()=>[l(r,{inline:!0,prop:"verifyCode",label:"验证码"},{default:a(()=>[l(d,{modelValue:e.value.verifyCode,"onUpdate:modelValue":o[6]||(o[6]=s=>e.value.verifyCode=s),placeholder:"请输入验证码",prop:"registerCode"},null,8,["modelValue"])]),_:1})]),_:1}),l(v,{span:12},{default:a(()=>[l(r,{inline:!0,prop:" registerCode",label:"注册码"},{default:a(()=>[l(d,{modelValue:e.value.registerCode,"onUpdate:modelValue":o[7]||(o[7]=s=>e.value.registerCode=s),placeholder:"请输入注册码",prop:"verifyCode"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(m,{onClick:B,class:"button-login",type:"primary","auto-insert-space":"",style:{"margin-left":"0.5vw"}},{default:a(()=>[t(" 注册 ")]),_:1}),n("div",W,[l(h,{class:"read",style:{"margin-top":"5vh","margin-left":"3vw"},modelValue:e.value.isChecked,"onUpdate:modelValue":o[8]||(o[8]=s=>e.value.isChecked=s)},{default:a(()=>[t("阅读并接受"),l(f,{underline:!1,href:"_blank",class:"privacy"},{default:a(()=>[t("《隐私条款》")]),_:1}),t("与"),l(f,{underline:!1,href:"_blank",class:"privacy"},{default:a(()=>[t("《隐私协议》")]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["model"])):w.value?(g(),c(x,{key:1,model:e.value,rules:U,ref_key:"form",ref:y,size:"large",autocomplete:"off","label-position":"right","label-width":"95px"},{default:a(()=>[X,l(r,{prop:"username",label:"用户名"},{default:a(()=>[l(d,{modelValue:e.value.username,"onUpdate:modelValue":o[9]||(o[9]=s=>e.value.username=s),placeholder:"请填写用户名"},null,8,["modelValue"])]),_:1}),l(r,{prop:"password",label:"密    码"},{default:a(()=>[l(d,{modelValue:e.value.password,"onUpdate:modelValue":o[10]||(o[10]=s=>e.value.password=s),name:"password",type:"password",placeholder:"请填写6位数密码"},null,8,["modelValue"])]),_:1}),n("div",Y,[l(h,{class:"read",style:{"padding-left":"2vw"},onChange:o[11]||(o[11]=s=>e.value.saveToken=!p.saveToken)},{default:a(()=>[t("30天内免登录")]),_:1}),l(f,{underline:!1,type:"info",class:"read",onClick:o[12]||(o[12]=s=>{k.value=!0,w.value=!1})},{default:a(()=>[t("忘记密码")]),_:1})]),l(m,{onClick:E,class:"button-login","auto-insert-space":""},{default:a(()=>[t("登录")]),_:1}),l(m,{onClick:o[13]||(o[13]=s=>b.value=!0),class:"button-register","auto-insert-space":""},{default:a(()=>[t("注册新账号")]),_:1}),n("div",ee,[l(h,{class:"read",style:{"margin-top":"5vh","margin-left":"2vw"},modelValue:e.value.isChecked,"onUpdate:modelValue":o[14]||(o[14]=s=>e.value.isChecked=s)},{default:a(()=>[t("阅读并接受"),l(f,{underline:!1,href:"_blank",class:"privacy"},{default:a(()=>[t("《隐私条款》")]),_:1}),t("与"),l(f,{underline:!1,href:"_blank",class:"privacy"},{default:a(()=>[t("《隐私协议》")]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["model"])):k.value?(g(),c(x,{key:2,model:e.value,rules:U,ref_key:"form",ref:y,size:"large",autocomplete:"off","label-position":"right","label-width":"90px"},{default:a(()=>[le,l(r,{prop:"email",label:"邮箱号"},{default:a(()=>[l(d,{modelValue:e.value.email,"onUpdate:modelValue":o[15]||(o[15]=s=>e.value.email=s),placeholder:"请填写邮箱号"},{append:a(()=>[u.disabled?(g(),c(m,{key:1,type:"default",disabled:""},{default:a(()=>[t(q(u.count)+"秒后重新发送",1)]),_:1})):(g(),c(m,{key:0,type:"default",onClick:T},{default:a(()=>[t("发送验证码")]),_:1}))]),_:1},8,["modelValue"])]),_:1}),l(r,{inline:!0,prop:"verifyCode",label:"验证码"},{default:a(()=>[l(d,{modelValue:e.value.verifyCode,"onUpdate:modelValue":o[16]||(o[16]=s=>e.value.verifyCode=s),placeholder:"请输入验证码"},null,8,["modelValue"])]),_:1}),l(r,{inline:!0,prop:"password",label:"重置密码"},{default:a(()=>[l(d,{modelValue:e.value.password,"onUpdate:modelValue":o[17]||(o[17]=s=>e.value.password=s),type:"password",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),l(r,{inline:!0,prop:"repassword",label:"确认密码"},{default:a(()=>[l(d,{modelValue:e.value.repassword,"onUpdate:modelValue":o[18]||(o[18]=s=>e.value.repassword=s),type:"password",placeholder:"请确认新密码"},null,8,["modelValue"])]),_:1}),l(m,{onClick:$,class:"button-login","auto-insert-space":""},{default:a(()=>[t("登录")]),_:1}),l(m,{onClick:o[19]||(o[19]=s=>b.value=!0),class:"button-register","auto-insert-space":""},{default:a(()=>[t("注册新账号")]),_:1}),n("div",ae,[l(h,{class:"read",style:{"margin-top":"5vh","margin-left":"2vw","vertical-align":"baseline"},modelValue:e.value.isChecked,"onUpdate:modelValue":o[20]||(o[20]=s=>e.value.isChecked=s)},{default:a(()=>[t("阅读并接受"),l(f,{href:"_blank",class:"privacy",style:{"vertical-align":"baseline"}},{default:a(()=>[t("《隐私条款》")]),_:1}),t("与"),l(f,{href:"_blank",class:"privacy",style:{"vertical-align":"baseline"}},{default:a(()=>[t("《隐私协议》")]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["model"])):D("",!0)]),_:1}),l(v,{span:5})]),_:1}),oe],64)}}};export{re as default};
